<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORION PHOTOGRAPHY </title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        :root {
            --color-background: #FDF8F5; /* Alabaster/Soft off-white */
            --color-text-dark: #2C2C2C; /* Deep Charcoal */
            --color-text-light: #555555;
            --color-accent: #C0A080; /* Muted Gold */
            --color-white: #FFFFFF;
        }

        html {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        /* Hide scrollbar for Chrome, Safari and Opera */
        html::-webkit-scrollbar {
            display: none;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text-light);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .font-serif {
            font-family: 'Playfair Display', serif;
        }
        
        h1, h2, h3, h4 {
            color: var(--color-text-dark);
        }

        .hero-video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0.6) 100%);
            z-index: 1;
        }
        
        .hero-background-video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
            object-fit: cover;
            z-index: 0;
        }
        
        #header {
            transition: background-color 0.4s ease, backdrop-filter 0.4s ease, padding 0.4s ease;
        }
        
        .header-scrolled {
            background-color: rgba(44, 44, 44, 0.85); /* #2c2c2c with transparency */
            backdrop-filter: blur(10px);
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .nav-overlay {
            transform: translateX(100%);
            transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1);
        }
        
        .nav-overlay.open {
            transform: translateX(0);
        }
        
        .testimonial-slide {
            display: none;
            animation: fadeIn 0.8s ease-in-out;
        }
        
        .testimonial-slide.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .gallery-item {
            transition: transform 0.4s ease, box-shadow 0.4s ease, filter 0.4s ease;
            cursor: pointer;
        }
        
        .gallery-item:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .gallery-item .description-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color: white;
            padding: 2rem 1rem 1rem;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .gallery-item:hover .description-overlay {
            opacity: 1;
            transform: translateY(0);
        }


        /* Portfolio Scroll Container */
        .portfolio-scroll-container, .blog-modal-gallery-container {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .portfolio-scroll-container::-webkit-scrollbar, .blog-modal-gallery-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        /* Scroll Reveal Animations */
        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom Button Style */
        .btn {
            display: inline-block;
            padding: 0.875rem 2.5rem;
            border-radius: 9999px;
            font-weight: 500;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.3s ease;
            text-align: center;
        }
        .btn-primary {
            background-color: var(--color-accent);
            color: var(--color-white);
        }
        .btn-primary:hover {
            background-color: #a98c6f; /* Darker accent */
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .btn-secondary {
            background-color: transparent;
            color: var(--color-white);
            border: 1px solid var(--color-white);
        }
        .btn-secondary:hover {
            background-color: var(--color-white);
            color: var(--color-text-dark);
        }

        /* Milestone Section Styles */
        #milestones {
            position: relative;
            background-image: url('https://i.pinimg.com/736x/5f/aa/05/5faa051f72abc5db576ac0e45affa511.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        #milestones::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(44, 44, 44, 0.7);
            z-index: 1;
        }

        #milestones .container {
            position: relative;
            z-index: 2;
        }

        .milestone-item {
            position: relative;
            width: 280px;
            height: 280px;
            background-size: contain;
            background-image: url('');
            background-position: center;
            background-repeat: no-repeat;
        }

        @media (min-width: 1280px) {
            #prev-milestone {
                left: -2rem;
            }
            #next-milestone {
                right: -2rem;
            }
        }
        
        .service-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem; /* 16px */
            font-size: 1.05rem;
            color: var(--color-text-dark);
        }
        .service-item i {
            color: var(--color-accent);
            width: 24px;
            height: 24px;
            flex-shrink: 0;
            margin-top: 2px;
        }

        /* Showcase Section Styles */
        .showcase-card {
            background-color: white;
            padding: 0.75rem;
            border-radius: 0.25rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.07);
            transition: all 0.4s ease;
        }
         .showcase-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        /* Blog Section Styles */
        .blog-post .read-more {
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--color-text-dark);
            transition: color 0.3s ease;
        }
        .blog-post .read-more:hover {
            color: var(--color-accent);
        }
        .blog-post img {
            transition: transform 0.4s ease;
        }
        .blog-post:hover img {
            transform: scale(1.05);
        }

        /* Footer Map Style */
        .footer-map iframe {
            filter: grayscale(1) contrast(1.2) opacity(0.8);
            transition: filter 0.3s ease;
        }
        .footer-map iframe:hover {
            filter: grayscale(0) contrast(1) opacity(1);
        }


        @keyframes shake {
          10%, 90% { transform: translate3d(-1px, 0, 0); }
          20%, 80% { transform: translate3d(2px, 0, 0); }
          30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
          40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        .shake {
          animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- Header -->
    <header id="header" class="fixed top-0 left-0 w-full z-50 py-6">
        <div class="container mx-auto px-6 flex justify-between items-center max-w-7xl">
             <a href="#hero" class="text-2xl lg:text-3xl font-serif font-bold text-white z-50 tracking-wide">ORION photography</a>
             <!-- Desktop Navigation -->
            <nav class="hidden md:flex items-center space-x-10">
                <a href="#about" class="about-modal-trigger text-white hover:text-gray-300 transition-colors tracking-wider">About</a>
                <a href="#portfolio" class="text-white hover:text-gray-300 transition-colors tracking-wider">Portfolio</a>
                <a href="#blog" class="text-white hover:text-gray-300 transition-colors tracking-wider">Blog</a>
                <a href="#milestones" class="text-white hover:text-gray-300 transition-colors tracking-wider">Milestones</a>
                <a href="#" class="btn btn-secondary contact-modal-trigger">Contact Us</a>
            </nav>
            <!-- Mobile Menu Button -->
            <button id="menu-btn" class="md:hidden z-50 text-white focus:outline-none">
                <i data-lucide="menu" class="w-7 h-7"></i>
            </button>
        </div>
    </header>

    <!-- Fullscreen Mobile Navigation Overlay -->
    <div id="nav-overlay" class="nav-overlay fixed top-0 right-0 w-full h-full bg-[#1c1c1c] z-[60] flex items-center justify-center">
        <button id="close-btn" class="absolute top-8 right-6 text-white focus:outline-none">
             <i data-lucide="x" class="w-9 h-9"></i>
        </button>
        <nav class="text-center">
            <ul class="space-y-8">
                <li><a href="#hero" class="nav-link text-4xl font-serif text-white hover:text-gray-400 transition-colors duration-300">Home</a></li>
                <li><a href="#about" class="nav-link about-modal-trigger text-4xl font-serif text-white hover:text-gray-400 transition-colors duration-300">About</a></li>
                <li><a href="#portfolio" class="nav-link text-4xl font-serif text-white hover:text-gray-400 transition-colors duration-300">Portfolio</a></li>
                 <li><a href="#blog" class="nav-link text-4xl font-serif text-white hover:text-gray-400 transition-colors duration-300">Blog</a></li>
                <li><a href="#milestones" class="nav-link text-4xl font-serif text-white hover:text-gray-400 transition-colors duration-300">Milestones</a></li>
                <li><a href="#" class="nav-link contact-modal-trigger text-4xl font-serif text-white hover:text-gray-400 transition-colors duration-300">Contact</a></li>
            </ul>
        </nav>
    </div>

    <main>
        <!-- Hero Section -->
        <section id="hero" class="relative h-screen w-full flex items-center justify-center text-center text-white overflow-hidden">
            <div class="hero-video-overlay"></div>
            
            <video 
                class="hero-background-video"
                src="https://videos.pexels.com/video-files/4275685/4275685-hd.mp4"
                autoplay 
                loop 
                muted 
                playsinline
                poster="https://images.pexels.com/photos/169198/pexels-photo-169198.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
            ></video>

            <div class="relative z-10 px-4">
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-serif leading-tight mb-4 reveal">Timeless Wedding Stories</h1>
                <p class="text-lg md:text-xl max-w-2xl mx-auto reveal" style="transition-delay: 0.2s;">We capture the unscripted moments, the heartfelt emotions, and the timeless essence of your love story.</p>
                <h1 class="text-lg md:text-xl max-w-2xl mx-auto reveal">ORION photography</h1>
            </div>
             <a href="#showcase" class="absolute bottom-10 left-1/2 -translate-x-1/2 z-10 animate-bounce">
                <i data-lucide="arrow-down-circle" class="w-10 h-10 text-white/70"></i>
            </a>
        </section>

        <!-- Intimate Wedding Showcase Section -->
        <section id="showcase" class="py-24 md:py-32 relative overflow-hidden">
            <div class="absolute inset-0 z-0 opacity-[0.03] pointer-events-none" style="background-image: url('https://static.vecteezy.com/system/resources/previews/022/997/163/original/world-map-dots-grey-png.png'); background-position: center; background-repeat: no-repeat; background-size: cover;"></div>
            <div class="container mx-auto px-6 max-w-7xl relative z-10">
                <div class="grid lg:grid-cols-2 gap-16 xl:gap-24 items-center">
                    <div class="reveal">
                        <p class="tracking-widest uppercase text-sm mb-3">Showcase</p>
                        <h2 class="text-4xl md:text-5xl font-serif mb-6 leading-tight">INTIMATE  WEDDING</h2>
                        <p class="text-lg leading-relaxed mb-6">
                            Intimate destination weddings offer an unparalleled chance to revel in the splendor of love amid an awe-inspiring panorama, enveloped by the cherished ones who matter the most. Our destination wedding photographer has mastered the art of seizing the essence of unbridled feelings and unfeigned instances that make these ceremonies so extraordinary.
                        </p>
                        <blockquote class="my-8 pl-6 border-l-2 border-stone-300">
                            <p class="italic text-lg">"I like to photograph anyone before they know what their best angles are."</p>
                            <cite class="text-sm mt-2 block not-italic">- Ellan Von Unwerth</cite>
                        </blockquote>
                        <a href="#" class="font-bold text-lg text-[var(--color-text-dark)] border-b-2 border-[var(--color-accent)] pb-1 hover:text-[var(--color-accent)] transition-colors contact-modal-trigger">
                            Make It Real
                        </a>
                    </div>
                    <div class="relative min-h-[550px] lg:min-h-[600px] reveal" style="transition-delay: 0.2s;">
                         <!-- Image 1 -->
                        <div class="showcase-card absolute w-3/5 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20">
                            <img src="https://images.pexels.com/photos/3779792/pexels-photo-3779792.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Couple Niharika & Suvamsh" class="w-full h-auto rounded-sm object-cover">
                            <div class="text-center py-3">
                                <h4 class="font-bold">NIHARIKA & SUVAMSH</h4>
                                <p class="text-xs text-gray-500">Destination: Bangalore</p>
                            </div>
                        </div>

                         <!-- Image 4 -->
                        <div class="showcase-card absolute w-3/5 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20">
                            <img src="https://cdn0.weddingwire.in/article-vendor-o/5446/original/1280/jpg/kerala-palakkad-wedding-photography-glareart-photography-15_15_135446_v1.jpeg" alt="Couple Niharika & Suvamsh" class="w-full h-auto rounded-sm object-cover">
                            <div class="text-center py-3">
                                <h4 class="font-bold">NIKHIL & SUMESH</h4>
                                <p class="text-xs text-gray-500">Destination: Kannur</p>
                            </div>
                        </div>


                        <!-- Image 2 -->
                        <div class="showcase-card absolute w-1/2 bottom-0 left-0 z-10 transform -rotate-6">
                            <img src="https://images.pexels.com/photos/1024993/pexels-photo-1024993.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Couple Pavithra & Aneil" class="w-full h-auto rounded-sm object-cover">
                             <div class="text-center py-3">
                                <h4 class="font-bold">PAVITHRA & ANEIL</h4>
                                <p class="text-xs text-gray-500">Destination: Mahabalipuram</p>
                            </div>
                        </div>
                        <!-- Image 3 -->
                        <div class="showcase-card absolute w-1/2 top-0 right-0 z-10 transform rotate-3">
                            <img src="https://images.pexels.com/photos/326612/pexels-photo-326612.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Couple Shebin & Mikhiya" class="w-full h-auto rounded-sm object-cover">
                             <div class="text-center py-3">
                                <h4 class="font-bold">SHEBIN & MIKHIYA</h4>
                                <p class="text-xs text-gray-500">Destination: Kochi</p>
                            </div>
                        </div>
                        <!-- Image 5 -->
                        <div class="showcase-card absolute w-3/5 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20">
                            <img src="https://img.weddingbazaar.com/shaadisaga_production/photos/pictures/008/098/336/new_medium/Snapinsta.app_377982240_673224281406264_5298942056619683596_n_1080.jpg?1706182423" alt="Couple Shebin & Mikhiya" class="w-full h-auto rounded-sm object-cover">
                             <div class="text-center py-3">
                                <h4 class="font-bold">SEHIN & MAYA</h4>
                                <p class="text-xs text-gray-500">Destination: Kollam</p>
                            </div>
                        </div>                        

                         <div class="absolute bottom-5 right-5 z-30 transform -rotate-12">
                             <p class="text-4xl font-serif text-gray-400/80" style="font-family: 'Playfair Display', cursive;">ORION LOVE</p>
                         </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about-us" class="py-24 md:py-32 bg-white">
            <div class="container mx-auto px-6 max-w-7xl">
                <div class="grid lg:grid-cols-2 gap-16 xl:gap-24 items-center">
                    <div class="reveal">
                        <p class="tracking-widest uppercase text-sm mb-3 text-[var(--color-accent)]">ABOUT ORION PHOTOGRAPHY</p>
                        <h2 class="text-4xl md:text-5xl font-serif mb-6 leading-tight">More Than Photographers, We Are Storytellers</h2>
                        <p class="text-lg leading-relaxed mb-6 text-gray-600">
                            Founded on a passion for authentic narrative, Orion Photography is a collective of artists dedicated to capturing the soul of your most cherished moments. We believe that the best photographs are born from genuine connection, trust, and a deep understanding of your unique story.
                        </p>
                        <div class="space-y-6 mt-8">
                            <div class="service-item">
                                <i data-lucide="camera"></i>
                                <div>
                                    <h4 class="font-bold">Candid Moments</h4>
                                    <p class="text-gray-600 text-base">We specialize in capturing the unscripted, fleeting moments of joy and emotion.</p>
                                </div>
                            </div>
                            <div class="service-item">
                                <i data-lucide="film"></i>
                                <div>
                                    <h4 class="font-bold">Cinematic Films</h4>
                                    <p class="text-gray-600 text-base">Our videography turns your wedding day into a timeless film you'll rewatch for years.</p>
                                </div>
                            </div>
                            <div class="service-item">
                                <i data-lucide="heart"></i>
                                <div>
                                    <h4 class="font-bold">Timeless Portraits</h4>
                                    <p class="text-gray-600 text-base">We craft stunning, magazine-worthy portraits that feel both classic and contemporary.</p>
                                </div>
                            </div>
                        </div>
                        <a href="#" class="btn btn-primary mt-10 about-modal-trigger">Read Our Full Story</a>
                    </div>
                    <div class="relative reveal order-first lg:order-last" style="transition-delay: 0.2s;">
                     <img src="https://lh3.googleusercontent.com/p/AF1QipP9P9yxBXtVvyzCR8_DfmZWiw_QIAcJMXr-TtPQ=s1360-w1360-h1020-rw" alt="Orion Photography team at work">
                    </div>
                </div>
            </div>
        </section>


        <!-- Portfolio Section -->
        <section id="portfolio" class="py-24 md:py-32 bg-white">
            <div class="container mx-auto px-6 max-w-7xl">
                <div class="text-center reveal">
                    <h2 class="text-4xl md:text-5xl font-serif mb-4">A Collection of Moments</h2>
                    <p class="max-w-2xl mx-auto text-lg mb-16">Stories of love we've had the honor to capture and craft.</p>
                </div>
                <div id="gallery-container" class="flex items-start gap-4 lg:gap-6 overflow-x-auto pb-4 reveal portfolio-scroll-container">
                    <!-- Gallery items will be loaded here from Supabase -->
                </div>
            </div>
        </section>

        <!-- Blog Section -->
        <section id="blog" class="py-24 md:py-32 bg-white">
            <div class="container mx-auto px-6 max-w-7xl">
                <div class="flex flex-col md:flex-row justify-between items-start mb-16 reveal">
                    <h2 class="text-4xl md:text-5xl font-serif mb-8 md:mb-0 leading-tight">READ<br>OUR BLOG</h2>
                    <blockquote class="max-w-sm text-right text-gray-500 italic mt-2 self-end">
                    </blockquote>
                </div>
                <div id="blog-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 reveal" style="transition-delay: 0.2s;">
                    <!-- Blog posts will be loaded here from Supabase -->
                </div>
                <div class="flex justify-center mt-16 space-x-2 reveal">
                    <span class="w-2 h-2 rounded-full bg-gray-300"></span>
                    <span class="w-2 h-2 rounded-full bg-gray-300"></span>
                    <span class="w-3 h-2 rounded-full bg-[var(--color-accent)]"></span>
                    <span class="w-2 h-2 rounded-full bg-gray-300"></span>
                    <span class="w-2 h-2 rounded-full bg-gray-300"></span>
                </div>
            </div>
        </section>

        <!-- Pioneering Moments Section -->
        <section id="pioneering-moments" class="bg-black text-white py-24 md:py-32 reveal">
            <div class="container mx-auto px-6 max-w-7xl flex items-center justify-around gap-8 md:gap-16">
                <div class="hidden lg:block">
                    <h2 class="font-light text-4xl tracking-[0.3em] uppercase whitespace-nowrap" style="writing-mode: vertical-rl; transform: rotate(180deg);">Pioneering Moments</h2>
                </div>
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-16 text-center w-full">
                    <!-- Stat 1 -->
                    <div>
                        <h3 class="text-6xl xl:text-7xl font-light text-white">
                            <span class="counter-number" data-target="14">00</span>+
                        </h3>
                        <p class="mt-2 text-sm tracking-widest uppercase text-gray-400">Years of<br>Excellence</p>
                    </div>
                    <!-- Stat 2 -->
                    <div>
                         <h3 class="text-6xl xl:text-7xl font-light text-white">
                            <span class="counter-number" data-target="268">0</span>+
                        </h3>
                        <p class="mt-2 text-sm tracking-widest uppercase text-gray-400">Projects<br>Completed</p>
                    </div>
                    <!-- Stat 3 -->
                    <div>
                         <h3 class="text-6xl xl:text-7xl font-light text-white">
                            <span class="counter-number" data-target="75">0</span>+
                        </h3>
                        <p class="mt-2 text-sm tracking-widest uppercase text-gray-400">Skilled<br>Employees</p>
                    </div>
                    <!-- Stat 4 -->
                    <div>
                         <h3 class="text-6xl xl:text-7xl font-light text-white">
                            <span class="counter-number" data-target="5">00</span>+
                        </h3>
                        <p class="mt-2 text-sm tracking-widest uppercase text-gray-400">Multiple<br>Sectors</p>
                    </div>
                </div>
            </div>
        </section>


        <!-- Milestones Section -->
        <section id="milestones" class="py-24 md:py-32 overflow-hidden">
            <div class="container mx-auto px-6 text-center max-w-7xl">
                <div class="reveal">
                    <h3 class="text-sm tracking-[0.3em] uppercase text-stone-300">ORION photography</h3>
                    <h2 class="text-4xl md:text-5xl font-serif mb-16 text-white">Milestone</h2>
                </div>
                <div id="milestone-slider" class="relative max-w-7xl mx-auto reveal">
                    <div class="overflow-hidden">
                        <div id="milestone-track" class="flex transition-transform duration-500 ease-in-out">
                             <!-- Slide 1 -->
                            <div class="milestone-slide w-full lg:w-1/4 flex-shrink-0 px-4">
                                <div class="milestone-item mx-auto flex flex-col justify-center items-center text-center p-6">
                                    <p class="text-sm mb-1 text-stone-300">Milestone</p>
                                    <p class="text-5xl font-bold font-serif text-white">2014</p>
                                    <p class="text-lg mb-4 text-stone-300">July</p>
                                    <p class="text-sm leading-relaxed px-2 text-stone-200">The idea of Wedding Bells was born with a vision to capture once-in-a-lifetime events.</p>
                                </div>
                            </div>
                            <!-- Slide 2 -->
                            <div class="milestone-slide w-full lg:w-1/4 flex-shrink-0 px-4">
                                <div class="milestone-item mx-auto flex flex-col justify-center items-center text-center p-6">
                                    <p class="text-sm mb-1 text-stone-300">Milestone</p>
                                    <p class="text-5xl font-bold font-serif text-white">2014</p>
                                    <p class="text-lg mb-4 text-stone-300">October</p>
                                    <p class="text-sm leading-relaxed px-2 text-stone-200">Launched our company and started documenting raw, emotion-filled wedding moments.</p>
                                </div>
                            </div>
                            <!-- Slide 3 -->
                            <div class="milestone-slide w-full lg:w-1/4 flex-shrink-0 px-4">
                                <div class="milestone-item mx-auto flex flex-col justify-center items-center text-center p-6">
                                    <p class="text-sm mb-1 text-stone-300">Milestone</p>
                                    <p class="text-5xl font-bold font-serif text-white">2020</p>
                                    <p class="text-lg mb-4 text-stone-300">January</p>
                                    <p class="text-sm leading-relaxed px-2 text-stone-200">We were honored to be Canon Maestro, which was a feather in our cap.</p>
                                </div>
                            </div>
                            <!-- Slide 4 -->
                            <div class="milestone-slide w-full lg:w-1/4 flex-shrink-0 px-4">
                                <div class="milestone-item mx-auto flex flex-col justify-center items-center text-center p-6">
                                    <p class="text-sm mb-1 text-stone-300">Milestone</p>
                                    <p class="text-5xl font-bold font-serif text-white">2023</p>
                                    <p class="text-lg mb-4 text-stone-300">January</p>
                                    <p class="text-sm leading-relaxed px-2 text-stone-200">We have completed 2500 projects so far, keeping the memories alive for decades.</p>
                                </div>
                            </div>
                             <!-- Slide 1 -->
                            <div class="milestone-slide w-full lg:w-1/4 flex-shrink-0 px-4">
                                <div class="milestone-item mx-auto flex flex-col justify-center items-center text-center p-6">
                                    <p class="text-sm mb-1 text-stone-300">Milestone</p>
                                    <p class="text-5xl font-bold font-serif text-white">2022</p>
                                    <p class="text-lg mb-4 text-stone-300">July</p>
                                    <p class="text-sm leading-relaxed px-2 text-stone-200">The idea of Wedding Bells was born with a vision to capture once-in-a-lifetime events.</p>
                                </div>
                            </div>
                            <!-- Slide 2 -->
                            <div class="milestone-slide w-full lg:w-1/4 flex-shrink-0 px-4">
                                <div class="milestone-item mx-auto flex flex-col justify-center items-center text-center p-6">
                                    <p class="text-sm mb-1 text-stone-300">Milestone</p>
                                    <p class="text-5xl font-bold font-serif text-white">2025</p>
                                    <p class="text-lg mb-4 text-stone-300">October</p>
                                    <p class="text-sm leading-relaxed px-2 text-stone-200">Launched our company and started documenting raw, emotion-filled wedding moments.</p>
                                </div>
                            </div> 
                        </div>
                    </div>
                    <button id="prev-milestone" class="absolute top-1/2 -translate-y-1/2 -left-2 sm:left-0 text-white/70 hover:text-white transition-colors transition-opacity duration-300">
                        <i data-lucide="chevron-left-circle" class="w-9 h-9"></i>
                    </button>
                    <button id="next-milestone" class="absolute top-1/2 -translate-y-1/2 -right-2 sm:right-0 text-white/70 hover:text-white transition-colors transition-opacity duration-300">
                        <i data-lucide="chevron-right-circle" class="w-9 h-9"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="py-24 md:py-32 bg-white overflow-hidden">
             <div class="container mx-auto px-6 text-center max-w-7xl">
                <div class="reveal">
                    <h2 class="text-4xl md:text-5xl font-serif mb-16">Words of Love</h2>
                </div>
                <div class="relative max-w-3xl mx-auto reveal">
                    <i data-lucide="quote" class="w-16 h-16 text-stone-200 absolute -top-8 left-1/2 -translate-x-1/2"></i>
                    <div id="testimonial-container" class="overflow-hidden min-h-[320px]">
                        <div class="testimonial-slide active">
                            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=200&auto=format&fit=crop" alt="Profile photo of Sarah" class="w-24 h-24 rounded-full object-cover mx-auto mb-6 shadow-md">
                            <p class="text-xl lg:text-2xl font-serif italic mb-6">"Orion photography covered my wedding. they have a amazing team. Ajesh & his team members Ranjith, Jeevan Tejas, Arun are good in their work. The service they provide is excellent. I would recommend them."</p>
                            <h4 class="font-bold text-lg tracking-wider uppercase">-Athira Sreedhar</h4>
                        </div>
                        <div class="testimonial-slide">
                            <img src="https://images.unsplash.com/photo-1580489944761-15a19d654956?q=80&w=200&auto=format&fit=crop" alt="Profile photo of Emily" class="w-24 h-24 rounded-full object-cover mx-auto mb-6 shadow-md">
                            <p class="text-xl lg:text-2xl font-serif italic mb-6">"Very professional team to capture and keep all your memories, and adoring moments...!!! Loved their innovative approach in every projects.Highly recommended."</p>
                            <h4 class="font-bold text-lg tracking-wider uppercase">- Madhava das</h4>
                        </div>
                        <div class="testimonial-slide">
                             <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=200&auto=format&fit=crop" alt="Profile photo of Jessica" class="w-24 h-24 rounded-full object-cover mx-auto mb-6 shadow-md">
                            <p class="text-xl lg:text-2xl font-serif italic mb-6">"Orion Photography and its staff provide very good service and I am satisfied with it.His staffs are very kind. Thank you Orion ."</p>
                            <h4 class="font-bold text-lg tracking-wider uppercase">- Jabir mhmd</h4>
                        </div>
                    </div>
                    <button id="prev-testimonial" class="absolute top-1/2 -translate-y-1/2 -left-4 md:-left-20 text-gray-400 hover:text-[var(--color-accent)] transition-colors">
                        <i data-lucide="chevron-left-circle" class="w-9 h-9"></i>
                    </button>
                    <button id="next-testimonial" class="absolute top-1/2 -translate-y-1/2 -right-4 md:-right-20 text-gray-400 hover:text-[var(--color-accent)] transition-colors">
                         <i data-lucide="chevron-right-circle" class="w-9 h-9"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer id="contact" class="bg-[#1e1e1e] text-gray-300 pt-24 pb-8 relative">
            <div class="container mx-auto px-6 max-w-7xl">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12">
                    <!-- Column 1: Brand & About -->
                    <div class="md:col-span-2 lg:col-span-1">
                        <h3 class="text-2xl font-serif text-white mb-4">ORION photography</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Crafting timeless, emotive stories from the moments that matter most. We are more than photographers; we are the narrators of your legacy.
                        </p>
                    </div>
                    
                    <!-- Column 2: Quick Links -->
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-4 tracking-wider">QUICK LINKS</h4>
                        <ul class="space-y-3 text-sm">
                            <li><a href="#about" class="about-modal-trigger hover:text-white transition-colors">About Us</a></li>
                            <li><a href="#portfolio" class="hover:text-white transition-colors">Portfolio</a></li>
                            <li><a href="#blog" class="hover:text-white transition-colors">Blog</a></li>
                            <li><a href="#" class="contact-modal-trigger hover:text-white transition-colors">Contact</a></li>
                        </ul>
                    </div>
                    
                    <!-- Column 3: Contact & Social -->
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-4 tracking-wider">GET IN TOUCH</h4>
                        <div class="space-y-4 text-sm">
                            <p>
                                Adakkaputhur, Kerala 679503<br>
                                Thrikkadeeri-II, India
                            </p>
                             <a href="mailto:orionphotography@gmail.com" class="block hover:text-white transition-colors">orionphotography@gmail.com</a>
                             <a href="tel:+917593038781" class="block hover:text-white transition-colors">+91 75930 38781</a>
                        </div>
                         <div class="flex space-x-5 mt-6">
                            <a href="https://www.instagram.com/orionphotography_?igsh=MXI0dHZra2Rjc2Y1OQ==" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                            <a href="#" class="text-gray-400 hover:text-white transition-colors"><i data-lucide="facebook" class="w-5 h-5"></i></a>
                            <a href="#" class="text-gray-400 hover:text-white transition-colors"><i data-lucide="youtube" class="w-5 h-5"></i></a>
                        </div>
                    </div>

                    <!-- Column 4: Map -->
                    <div class="footer-map h-48 md:h-full w-full rounded-md overflow-hidden">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3917.409390238475!2d76.3560667!3d10.9327111!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ba7d1b6a4148e39%3A0x51f0a68b6adc7e95!2sOrion%20photography!5e0!3m2!1sen!2sus" 
                            width="100%" 
                            height="100%" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>

                <!-- Bottom Bar -->
                <div class="mt-20 pt-8 border-t border-gray-700/50 flex flex-col sm:flex-row justify-between items-center text-xs text-gray-500">
                    <p>&copy; <span id="year"></span> ORION photography. All Rights Reserved.</p>
                    <p class="mt-2 sm:mt-0">Powered by DEVCOTEL</p>
                </div>
            </div>
             <button id="admin-btn" class="absolute bottom-6 right-6 text-gray-600 hover:text-gray-400 transition-colors" aria-label="Admin Panel">
                <i data-lucide="sliders-horizontal" class="w-5 h-5"></i>
            </button>
        </footer>
    </main>
    
    <!-- About Modal -->
    <div id="about-modal" class="fixed inset-0 bg-black bg-opacity-70 z-[103] hidden items-center justify-center p-4">
        <div class="bg-white text-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto p-8 relative">
            <button id="close-about-btn" class="absolute top-4 right-4 text-gray-500 hover:text-black">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="order-2 md:order-1">
                    <h2 class="text-4xl md:text-5xl font-serif mb-6">Our Story, Your Story</h2>
                    <div class="space-y-4 text-gray-600 leading-relaxed">
                       <p>The story of Orion Photography is not just about cameras and lenses; it’s a story of relentless passion, unyielding vision, and the profound belief that every life event deserves to be chronicled with soul. It began in Mangode in 2015, conceived by a man with little more than a camera, a heart full of dreams, and the raw talent to see the world not just as it is, but as it feels.</p>
                       <p>In those early days, our founder poured every ounce of his energy into building a foundation based on quality and trust. The initial path was challenging, paved with long hours, creative struggles, and the constant hustle required to establish a name in a highly competitive industry. But where others saw obstacles, he saw opportunities—opportunities to innovate, to connect deeply with clients, and to redefine what local photography could be.</p>
                       <p>Our team, which has grown organically alongside our reputation, now shares this core belief. We approach every assignment with the same commitment: to be discreet observers who step in only when necessary to guide and create stunning, magazine-worthy portraits. We are storytellers first, using our technical mastery to ensure that the lighting, composition, and mood of every photograph elevate your memory into a piece of art.</p>
                    </div>
                </div>
                <div class="order-1 md:order-2">
                     <img src="https://lh3.googleusercontent.com/p/AF1QipP9P9yxBXtVvyzCR8_DfmZWiw_QIAcJMXr-TtPQ=s1360-w1360-h1020-rw" alt="Orion Photography Team"class="rounded-lg shadow-lg w-full h-full object-cover">
                </div>
            </div>
        </div>
    </div>


    <!-- Contact Modal -->
    <div id="contact-modal" class="fixed inset-0 bg-black bg-opacity-70 z-[102] hidden items-center justify-center p-4">
        <div class="bg-white text-gray-800 rounded-lg shadow-2xl w-full max-w-lg p-8 relative">
             <button id="close-contact-btn" class="absolute top-4 right-4 text-gray-500 hover:text-black">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <div id="contact-form-container">
                <h2 class="text-3xl font-serif mb-2 text-center">Get In Touch</h2>
                <p class="text-center text-gray-500 mb-6">We'd love to hear from you. Fill out the form below.</p>
                <form id="contact-form" class="space-y-4">
                    <div>
                        <label for="contact-name" class="block text-sm font-medium text-gray-700">Full Name</label>
                        <input type="text" id="contact-name" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]">
                    </div>
                     <div>
                        <label for="contact-email" class="block text-sm font-medium text-gray-700">Email Address</label>
                        <input type="email" id="contact-email" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]">
                    </div>
                    <div>
                        <label for="contact-phone" class="block text-sm font-medium text-gray-700">Phone Number (Optional)</label>
                        <input type="tel" id="contact-phone" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]">
                    </div>
                    <div>
                        <label for="contact-message" class="block text-sm font-medium text-gray-700">Message</label>
                        <textarea id="contact-message" rows="4" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary w-full !py-3">Send Message</button>
                </form>
            </div>
            <div id="contact-success-message" class="hidden text-center py-10">
                <i data-lucide="check-circle-2" class="w-16 h-16 text-green-500 mx-auto mb-4"></i>
                <h2 class="text-2xl font-serif mb-2">Thank You!</h2>
                <p class="text-gray-600">Your message has been sent. We'll be in touch shortly.</p>
            </div>
        </div>
    </div>

    <!-- Blog Post Modal -->
    <div id="blog-modal" class="fixed inset-0 bg-black bg-opacity-80 z-[104] hidden items-center justify-center p-4">
        <div class="bg-white text-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative">
            <button id="close-blog-btn" class="absolute top-4 right-4 text-gray-500 hover:text-black z-10 bg-white/50 rounded-full p-1">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <div id="blog-modal-content-container">
                <img id="blog-modal-image" src="" alt="" class="w-full h-64 md:h-96 object-cover">
                <div class="p-8 md:p-12">
                    <h2 id="blog-modal-title" class="text-3xl md:text-5xl font-serif mb-4"></h2>
                    <p id="blog-modal-subtitle" class="text-lg text-gray-500 mb-8"></p>
                    <div id="blog-modal-content" class="prose max-w-none text-gray-600 leading-relaxed space-y-4"></div>
                    
                    <hr class="my-12">

                    <h3 class="text-2xl font-serif mb-6 text-center">From Our Gallery</h3>
                    <div id="blog-modal-gallery" class="flex items-start gap-4 overflow-x-auto pb-4 blog-modal-gallery-container">
                        <!-- Mini gallery items will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Password Prompt Modal -->
    <div id="password-modal" class="fixed inset-0 bg-black bg-opacity-70 z-[101] hidden items-center justify-center p-4">
        <div class="bg-white text-gray-800 rounded-lg shadow-2xl w-full max-w-sm p-8 relative">
            <button id="close-password-btn" class="absolute top-4 right-4 text-gray-500 hover:text-black">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h2 class="text-2xl font-serif mb-6 text-center">Admin Access</h2>
            <form id="password-form">
                <label for="password-input" class="block text-sm font-medium text-gray-700">Password</label>
                <input type="password" id="password-input" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]">
                <p id="password-error" class="text-red-500 text-sm mt-2 hidden">Incorrect password. Please try again.</p>
                <button type="submit" class="btn btn-primary w-full mt-6 !py-3">Login</button>
            </form>
        </div>
    </div>

    <!-- CMS Modal -->
    <div id="cms-modal" class="fixed inset-0 bg-black bg-opacity-70 z-[100] hidden items-center justify-center p-4">
        <div class="bg-white text-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto p-8 relative">
            <button id="close-cms-btn" class="absolute top-4 right-4 text-gray-500 hover:text-black">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h2 class="text-3xl font-serif mb-6 text-center">Content Management</h2>
            
            <!-- Tabs -->
            <div class="flex border-b mb-6">
                <button id="blog-tab-btn" class="py-2 px-4 font-semibold border-b-2 border-[var(--color-accent)] text-[var(--color-accent)]">Blog Posts</button>
                <button id="gallery-tab-btn" class="py-2 px-4 text-gray-500 font-semibold">Gallery Items</button>
                <button id="logout-btn" class="ml-auto py-2 px-4 text-gray-500 font-semibold hover:text-red-500 transition-colors">Logout</button>
            </div>

            <!-- Blog Post Manager -->
            <div id="blog-manager">
                <h3 class="font-serif text-xl mb-4" id="blog-form-title">Add New Blog Post</h3>
                <form id="blog-form" class="space-y-4 p-4 border rounded bg-gray-50 mb-8">
                    <input type="hidden" id="blog-id">
                    <div>
                        <label for="blog-title" class="block text-sm font-medium text-gray-700">Title</label>
                        <input type="text" id="blog-title" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]">
                    </div>
                    <div>
                        <label for="blog-subtitle" class="block text-sm font-medium text-gray-700">Subtitle</label>
                        <input type="text" id="blog-subtitle" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]">
                    </div>
                    <div>
                        <label for="blog-image-url" class="block text-sm font-medium text-gray-700">Image URL</label>
                        <input type="url" id="blog-image-url" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]">
                    </div>
                    <div>
                        <label for="blog-content" class="block text-sm font-medium text-gray-700">Content</label>
                        <textarea id="blog-content" rows="4" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]"></textarea>
                    </div>
                    <div class="flex items-center gap-4">
                        <button type="submit" id="submit-blog-btn" class="btn btn-primary w-full !py-2.5">Add Post</button>
                        <button type="button" id="cancel-blog-edit-btn" class="btn !bg-gray-200 !text-gray-800 w-full !py-2.5 hover:!bg-gray-300 hidden">Cancel</button>
                    </div>
                </form>

                <h3 class="font-serif text-xl mb-4">Manage Existing Posts</h3>
                <div id="blog-list" class="space-y-3 max-h-64 overflow-y-auto pr-2 border rounded p-4">
                    <!-- Dynamic list of blog posts -->
                </div>
            </div>

            <!-- Gallery Item Manager -->
            <div id="gallery-manager" class="hidden">
                 <h3 class="font-serif text-xl mb-4" id="gallery-form-title">Add New Gallery Item</h3>
                <form id="gallery-form" class="space-y-4 p-4 border rounded bg-gray-50 mb-8">
                    <input type="hidden" id="gallery-id">
                    <div>
                        <label for="gallery-image-url" class="block text-sm font-medium text-gray-700">Image URL</label>
                        <input type="url" id="gallery-image-url" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]">
                    </div>
                    <div>
                        <label for="gallery-alt-text" class="block text-sm font-medium text-gray-700">Image Description (for accessibility)</label>
                        <input type="text" id="gallery-alt-text" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)]">
                    </div>
                    <div class="flex items-center gap-4">
                        <button type="submit" id="submit-gallery-btn" class="btn btn-primary w-full !py-2.5">Add Item</button>
                        <button type="button" id="cancel-gallery-edit-btn" class="btn !bg-gray-200 !text-gray-800 w-full !py-2.5 hover:!bg-gray-300 hidden">Cancel</button>
                    </div>
                </form>

                <h3 class="font-serif text-xl mb-4">Manage Existing Items</h3>
                <div id="gallery-list" class="space-y-3 max-h-64 overflow-y-auto pr-2 border rounded p-4">
                     <!-- Dynamic list of gallery items -->
                </div>
            </div>
        </div>
    </div>


    <script type="module">
        const { createClient } = supabase;

        const SUPABASE_URL = 'https://nrrlyzcdchquhwhdbkup.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5ycmx5emNkY2hxdWh3aGRia3VwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA1NjcwMDMsImV4cCI6MjA3NjE0MzAwM30.UNRLoKYvuFb-RwUzDPKlaL3npr0ZWKcXn5A1py_DbrI';

        const db = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // --- RENDER FUNCTIONS ---
        const renderGallery = (items) => {
            const container = document.getElementById('gallery-container');
            if (!container) return;
            container.innerHTML = items.map(item => `
                <div class="relative flex-shrink-0 group gallery-item rounded-lg overflow-hidden cursor-pointer">
                    <img class="h-80 md:h-96 w-auto object-cover transition-transform duration-300 group-hover:scale-105" src="${item.image_url}" alt="${item.alt_text}">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    <div class="absolute bottom-0 left-0 p-4 w-full">
                        <p class="text-white text-sm font-medium translate-y-4 opacity-0 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300">${item.alt_text}</p>
                    </div>
                </div>
            `).join('');
        };

        const renderBlogPosts = (posts) => {
            const container = document.getElementById('blog-container');
            if (!container) return;
            container.innerHTML = posts.map(post => `
                <div class="blog-post">
                    <a href="#" class="block overflow-hidden mb-6 rounded" data-id="${post.id}">
                       <img src="${post.image_url}" alt="${post.title}" class="w-full h-80 object-cover pointer-events-none">
                    </a>
                    <h4 class="text-xl font-serif font-bold mb-1">${post.title.toUpperCase()}</h4>
                    <p class="text-sm text-gray-500 mb-4">${post.subtitle}</p>
                    <p class="mb-4 text-sm leading-relaxed">${post.content.substring(0, 100)}...</p>
                    <a href="javascript:void(0)" class="read-more read-more-trigger text-sm" data-id="${post.id}">READ MORE</a>
                </div>
            `).join('');
        };
        
        // --- FETCH FUNCTIONS ---
        const fetchGallery = async () => {
            const { data, error } = await db.from('gallery_items').select('*').order('created_at', { ascending: false });
            if (error) {
                console.error('Error fetching gallery:', error.message);
            } else {
                renderGallery(data);
                
                // --- Gallery Auto-Scroll Carousel ---
                const galleryContainer = document.getElementById('gallery-container');
                if (galleryContainer && data && data.length > 1) { // Only start if more than one image
                    let galleryInterval;
                    let currentGalleryIndex = 0;

                    const advanceCarousel = () => {
                        const images = galleryContainer.querySelectorAll('.gallery-item');
                        if (images.length === 0) return;
                        
                        currentGalleryIndex = (currentGalleryIndex + 1) % images.length;
                        
                        const nextImage = images[currentGalleryIndex];
                        if (nextImage) {
                            nextImage.scrollIntoView({
                                behavior: 'smooth',
                                block: 'nearest',
                                inline: 'center'
                            });
                        }
                    };

                    const startGalleryCarousel = () => {
                        clearInterval(galleryInterval);
                        galleryInterval = setInterval(advanceCarousel, 300000);
                    };

                    const stopGalleryCarousel = () => {
                        clearInterval(galleryInterval);
                    };
                    
                    galleryContainer.addEventListener('mouseenter', stopGalleryCarousel);
                    galleryContainer.addEventListener('mouseleave', startGalleryCarousel);

                    startGalleryCarousel();
                }
            }
        };
        
        const fetchBlogPosts = async () => {
            const { data, error } = await db.from('blog_posts').select('*').order('created_at', { ascending: false });
            if (error) console.error('Error fetching blog posts:', error.message);
            else renderBlogPosts(data);
        };


        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();

            fetchGallery();
            fetchBlogPosts();

            // --- Header Scroll Animation ---
            const header = document.getElementById('header');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    header.classList.add('header-scrolled');
                } else {
                    header.classList.remove('header-scrolled');
                }
            });

            // --- Mobile Menu ---
            const menuBtn = document.getElementById('menu-btn');
            const closeBtn = document.getElementById('close-btn');
            const navOverlay = document.getElementById('nav-overlay');
            const navLinks = document.querySelectorAll('.nav-link');

            const openNav = () => navOverlay.classList.add('open');
            const closeNav = () => navOverlay.classList.remove('open');
            
            menuBtn.addEventListener('click', openNav);
            closeBtn.addEventListener('click', closeNav);
            navLinks.forEach(link => {
                if (!link.classList.contains('contact-modal-trigger') && !link.classList.contains('about-modal-trigger')) {
                    link.addEventListener('click', closeNav);
                }
            });

            // --- About Modal ---
            const aboutModal = document.getElementById('about-modal');
            const closeAboutBtn = document.getElementById('close-about-btn');
            const aboutModalTriggers = document.querySelectorAll('.about-modal-trigger');

            const openAboutModal = () => {
                aboutModal.classList.remove('hidden');
                aboutModal.classList.add('flex');
                document.body.style.overflow = 'hidden';
                lucide.createIcons();
            };

            const closeAboutModal = () => {
                aboutModal.classList.add('hidden');
                aboutModal.classList.remove('flex');
                document.body.style.overflow = '';
            };

            aboutModalTriggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (navOverlay.classList.contains('open')) closeNav();
                    openAboutModal();
                });
            });

            closeAboutBtn.addEventListener('click', closeAboutModal);
            aboutModal.addEventListener('click', (e) => {
                if (e.target === aboutModal) closeAboutModal();
            });

            // --- Contact Modal ---
            const contactModal = document.getElementById('contact-modal');
            const closeContactBtn = document.getElementById('close-contact-btn');
            const contactModalTriggers = document.querySelectorAll('.contact-modal-trigger');
            const contactForm = document.getElementById('contact-form');
            const contactFormContainer = document.getElementById('contact-form-container');
            const contactSuccessMessage = document.getElementById('contact-success-message');

            const openContactModal = () => {
                contactModal.classList.remove('hidden');
                contactModal.classList.add('flex');
                document.body.style.overflow = 'hidden';
                lucide.createIcons();
            };

            const closeContactModal = () => {
                contactModal.classList.add('hidden');
                contactModal.classList.remove('flex');
                document.body.style.overflow = '';
                setTimeout(() => {
                    contactForm.reset();
                    contactFormContainer.classList.remove('hidden');
                    contactSuccessMessage.classList.add('hidden');
                }, 300);
            };

            contactModalTriggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (navOverlay.classList.contains('open')) closeNav();
                    openContactModal();
                });
            });

            closeContactBtn.addEventListener('click', closeContactModal);
            contactModal.addEventListener('click', (e) => {
                if (e.target === contactModal) closeContactModal();
            });
            
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('contact-name').value;
                const email = document.getElementById('contact-email').value;
                const phone = document.getElementById('contact-phone').value;
                const message = document.getElementById('contact-message').value;
                const whatsappNumber = "7593038781";
                
                const whatsappMessage = encodeURIComponent(`Hello, I'm ${name}.\n\nEmail: ${email}\nPhone: ${phone}\n\nMessage: ${message}`);
                const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${whatsappMessage}`;
                
                window.open(whatsappUrl, '_blank');
                
                contactFormContainer.classList.add('hidden');
                contactSuccessMessage.classList.remove('hidden');
                setTimeout(closeContactModal, 3000);
            });

            // --- Blog Modal ---
            const blogModal = document.getElementById('blog-modal');
            const closeBlogBtn = document.getElementById('close-blog-btn');
            const blogContainer = document.getElementById('blog-container');

            const openBlogModal = async (postId) => {
                if (!postId) return;

                // Fetch post and gallery data in parallel
                const [postRes, galleryRes] = await Promise.all([
                    db.from('blog_posts').select('*').eq('id', postId).single(),
                    db.from('gallery_items').select('image_url, alt_text').order('created_at', { ascending: false }).limit(6)
                ]);

                if (postRes.error || !postRes.data) {
                    console.error('Error fetching blog post for modal:', postRes.error?.message);
                    return;
                }

                const post = postRes.data;
                const galleryItems = galleryRes.data || [];

                // Populate Modal Content
                document.getElementById('blog-modal-image').src = post.image_url;
                document.getElementById('blog-modal-image').alt = post.title;
                document.getElementById('blog-modal-title').textContent = post.title;
                document.getElementById('blog-modal-subtitle').textContent = post.subtitle;
                document.getElementById('blog-modal-content').innerHTML = post.content.replace(/\n/g, '<br>');

                // Populate Mini Gallery
                const galleryContainer = document.getElementById('blog-modal-gallery');
                galleryContainer.innerHTML = galleryItems.map(item => `
                    <div class="flex-shrink-0">
                        <img src="${item.image_url}" alt="${item.alt_text}" class="h-24 w-auto rounded object-cover">
                    </div>
                `).join('');
                
                // Show Modal
                blogModal.classList.remove('hidden');
                blogModal.classList.add('flex');
                document.body.style.overflow = 'hidden';
                lucide.createIcons();
            };

            const closeBlogModal = () => {
                blogModal.classList.add('hidden');
                blogModal.classList.remove('flex');
                document.body.style.overflow = '';
            };

            blogContainer.addEventListener('click', e => {
                const readMoreLink = e.target.closest('.read-more-trigger');
                if (readMoreLink) {
                    e.preventDefault();
                    const postId = readMoreLink.dataset.id;
                    openBlogModal(postId);
                }
            });

            closeBlogBtn.addEventListener('click', closeBlogModal);
            blogModal.addEventListener('click', (e) => {
                if (e.target === blogModal) closeBlogModal();
            });


            // --- Testimonial Slider ---
            const slides = document.querySelectorAll('.testimonial-slide');
            const prevBtn = document.getElementById('prev-testimonial');
            const nextBtn = document.getElementById('next-testimonial');
            let currentSlide = 0;

            function showSlide(index) {
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
            }

            function nextSlide() {
                currentSlide = (currentSlide + 1) % slides.length;
                showSlide(currentSlide);
            }

            function prevSlide() {
                currentSlide = (currentSlide - 1 + slides.length) % slides.length;
                showSlide(currentSlide);
            }

            if (slides.length > 0) {
                nextBtn.addEventListener('click', nextSlide);
                prevBtn.addEventListener('click', prevSlide);
                setInterval(nextSlide, 7000);
                showSlide(currentSlide);
            }

             // --- Milestone Slider ---
            const milestoneSlider = document.getElementById('milestone-slider');
            if (milestoneSlider) {
                const track = document.getElementById('milestone-track');
                const milestoneSlides = Array.from(track.children);
                const nextButton = document.getElementById('next-milestone');
                const prevButton = document.getElementById('prev-milestone');
                
                let currentIndex = 0;
                
                const updateSlider = () => {
                    if (milestoneSlides.length === 0) return;
                    setTimeout(() => {
                        const slideWidth = milestoneSlides[0].getBoundingClientRect().width;
                        const containerWidth = track.parentElement.offsetWidth;
                        const slidesInView = Math.max(1, Math.round(containerWidth / slideWidth));

                        if (isNaN(slideWidth) || slideWidth <= 0) return;
                        
                        const maxIndex = milestoneSlides.length - slidesInView;
                        currentIndex = Math.max(0, Math.min(currentIndex, maxIndex));
                        track.style.transform = `translateX(-${currentIndex * slideWidth}px)`;

                        prevButton.classList.toggle('opacity-0', currentIndex === 0);
                        prevButton.classList.toggle('pointer-events-none', currentIndex === 0);
                        nextButton.classList.toggle('opacity-0', currentIndex >= maxIndex);
                        nextButton.classList.toggle('pointer-events-none', currentIndex >= maxIndex);
                    }, 50);
                };
                
                nextButton.addEventListener('click', () => {
                    const slideWidth = milestoneSlides[0].getBoundingClientRect().width;
                    const containerWidth = track.parentElement.offsetWidth;
                    const slidesInView = Math.max(1, Math.round(containerWidth / slideWidth));
                    const maxIndex = milestoneSlides.length - slidesInView;
                    if (currentIndex < maxIndex) {
                        currentIndex++;
                        updateSlider();
                    }
                });

                prevButton.addEventListener('click', () => {
                    if (currentIndex > 0) {
                        currentIndex--;
                        updateSlider();
                    }
                });
                
                window.addEventListener('resize', updateSlider);
                updateSlider(); // Initial setup
            }

            // --- Number Counter Animation ---
            const startCounterAnimation = () => {
                const counters = document.querySelectorAll('.counter-number');
                if (!counters.length || counters[0].dataset.animated) return;

                counters.forEach(counter => {
                    counter.dataset.animated = 'true';
                    const target = parseInt(counter.dataset.target, 10);
                    let startTime = null;
                    const animationDuration = 4000; // Animate over 4 seconds

                    const animate = (timestamp) => {
                        if (!startTime) startTime = timestamp;
                        const progress = timestamp - startTime;
                        const currentVal = Math.min(Math.floor((progress / animationDuration) * target), target);

                        if (target < 10) {
                            counter.textContent = currentVal.toString().padStart(2, '0');
                        } else {
                            counter.textContent = currentVal;
                        }

                        if (progress < animationDuration) {
                            requestAnimationFrame(animate);
                        } else {
                            if (target < 10) {
                                counter.textContent = target.toString().padStart(2, '0');
                            } else {
                                counter.textContent = target;
                            }
                        }
                    };
                    requestAnimationFrame(animate);
                });
            };

            // --- Scroll Reveal Animation (Intersection Observer) ---
            const revealObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        if (entry.target.id === 'pioneering-moments') {
                            startCounterAnimation();
                        }
                        // observer.unobserve(entry.target); // Uncomment to make animations run only once
                    }
                });
            }, {
                rootMargin: '0px 0px -100px 0px'
            });

            document.querySelectorAll('.reveal').forEach(el => {
                revealObserver.observe(el);
            });


            // --- Set current year in footer ---
            document.getElementById('year').textContent = new Date().getFullYear();
            
            // --- CMS ---
            const cmsModal = document.getElementById('cms-modal');
            const adminBtn = document.getElementById('admin-btn');
            const closeCmsBtn = document.getElementById('close-cms-btn');
            const passwordModal = document.getElementById('password-modal');
            const closePasswordBtn = document.getElementById('close-password-btn');
            const passwordForm = document.getElementById('password-form');
            const passwordInput = document.getElementById('password-input');
            const passwordError = document.getElementById('password-error');
            const logoutBtn = document.getElementById('logout-btn');

            adminBtn.addEventListener('click', () => {
                passwordModal.classList.remove('hidden');
                passwordModal.classList.add('flex');
                passwordInput.focus();
                lucide.createIcons();
            });

            const closePasswordModal = () => {
                passwordModal.classList.add('hidden');
                passwordModal.classList.remove('flex');
                passwordInput.value = '';
                passwordError.classList.add('hidden');
                passwordInput.classList.remove('border-red-500');
            };
            
            const openCmsModal = () => {
                cmsModal.classList.remove('hidden');
                cmsModal.classList.add('flex');
                document.body.style.overflow = 'hidden';
                loadAdminData();
                lucide.createIcons();
            }
            
            const closeCmsModal = () => {
                cmsModal.classList.add('hidden');
                cmsModal.classList.remove('flex');
                document.body.style.overflow = '';
            }

            closePasswordBtn.addEventListener('click', closePasswordModal);
            closeCmsBtn.addEventListener('click', closeCmsModal);
            
            passwordModal.addEventListener('click', (e) => {
                if (e.target === passwordModal) closePasswordModal();
            });
            
            cmsModal.addEventListener('click', (e) => {
                if (e.target === cmsModal) closeCmsModal();
            });

            passwordForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const password = passwordInput.value;
                const adminEmail = 'admin@orionphotography.com'; 
                
                const { data, error } = await db.auth.signInWithPassword({
                    email: adminEmail,
                    password: password,
                });

                if (error) {
                    console.error('Admin login failed:', error);
                    passwordError.textContent = error.message;
                    passwordError.classList.remove('hidden');
                    passwordInput.classList.add('border-red-500');
                    passwordForm.classList.add('shake');
                    setTimeout(() => passwordForm.classList.remove('shake'), 820);
                    passwordInput.value = '';
                } else {
                    closePasswordModal();
                    openCmsModal();
                }
            });

            logoutBtn.addEventListener('click', async () => {
                await db.auth.signOut();
                closeCmsModal();
                alert('You have been logged out.');
            });

            // --- CMS Tabs ---
            const blogTabBtn = document.getElementById('blog-tab-btn');
            const galleryTabBtn = document.getElementById('gallery-tab-btn');
            const blogManager = document.getElementById('blog-manager');
            const galleryManager = document.getElementById('gallery-manager');

            blogTabBtn.addEventListener('click', () => {
                galleryManager.classList.add('hidden');
                blogManager.classList.remove('hidden');
                galleryTabBtn.classList.remove('border-[var(--color-accent)]', 'text-[var(--color-accent)]');
                galleryTabBtn.classList.add('text-gray-500');
                blogTabBtn.classList.add('border-[var(--color-accent)]', 'text-[var(--color-accent)]');
            });

            galleryTabBtn.addEventListener('click', () => {
                blogManager.classList.add('hidden');
                galleryManager.classList.remove('hidden');
                blogTabBtn.classList.remove('border-[var(--color-accent)]', 'text-[var(--color-accent)]');
                blogTabBtn.classList.add('text-gray-500');
                galleryTabBtn.classList.add('border-[var(--color-accent)]', 'text-[var(--color-accent)]');
            });
            
            // --- Blog CRUD ---
            const blogForm = document.getElementById('blog-form');
            const blogIdInput = document.getElementById('blog-id');
            const blogTitleInput = document.getElementById('blog-title');
            const blogSubtitleInput = document.getElementById('blog-subtitle');
            const blogImageUrlInput = document.getElementById('blog-image-url');
            const blogContentInput = document.getElementById('blog-content');
            const blogList = document.getElementById('blog-list');
            const blogFormTitle = document.getElementById('blog-form-title');
            const submitBlogBtn = document.getElementById('submit-blog-btn');
            const cancelBlogEditBtn = document.getElementById('cancel-blog-edit-btn');
            
            const loadAdminBlogPosts = async () => {
                const { data, error } = await db.from('blog_posts').select('*').order('created_at');
                if (data) {
                    blogList.innerHTML = data.map(post => `
                        <div class="flex items-center justify-between p-2 border rounded bg-white">
                            <p class="truncate pr-4">${post.title}</p>
                            <div class="flex-shrink-0 flex gap-2">
                                <button class="edit-blog-btn text-blue-500 hover:text-blue-700" data-id="${post.id}"><i class="w-4 h-4" data-lucide="edit"></i></button>
                                <button class="delete-blog-btn text-red-500 hover:text-red-700" data-id="${post.id}"><i class="w-4 h-4" data-lucide="trash-2"></i></button>
                            </div>
                        </div>
                    `).join('');
                    lucide.createIcons();
                }
            };

            const resetBlogForm = () => {
                blogForm.reset();
                blogIdInput.value = '';
                blogFormTitle.textContent = 'Add New Blog Post';
                submitBlogBtn.textContent = 'Add Post';
                cancelBlogEditBtn.classList.add('hidden');
            };

            blogForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const blogData = {
                    title: blogTitleInput.value,
                    subtitle: blogSubtitleInput.value,
                    image_url: blogImageUrlInput.value,
                    content: blogContentInput.value,
                };

                const id = blogIdInput.value;
                let error;
                if (id) { // Update
                    ({ error } = await db.from('blog_posts').update(blogData).eq('id', id));
                } else { // Create
                    ({ error } = await db.from('blog_posts').insert([blogData]));
                }
                
                if (error) {
                    alert('Error saving post: ' + error.message);
                } else {
                    resetBlogForm();
                    await fetchBlogPosts();
                    await loadAdminBlogPosts();
                }
            });

            cancelBlogEditBtn.addEventListener('click', resetBlogForm);

            blogList.addEventListener('click', async (e) => {
                const editBtn = e.target.closest('.edit-blog-btn');
                const deleteBtn = e.target.closest('.delete-blog-btn');
                
                if (editBtn) {
                    const id = editBtn.dataset.id;
                    const { data, error } = await db.from('blog_posts').select('*').eq('id', id).single();
                    if (data) {
                        blogIdInput.value = data.id;
                        blogTitleInput.value = data.title;
                        blogSubtitleInput.value = data.subtitle;
                        blogImageUrlInput.value = data.image_url;
                        blogContentInput.value = data.content;
                        blogFormTitle.textContent = 'Editing Post';
                        submitBlogBtn.textContent = 'Update Post';
                        cancelBlogEditBtn.classList.remove('hidden');
                        blogForm.scrollIntoView({ behavior: 'smooth' });
                    }
                }

                if (deleteBtn) {
                    const id = deleteBtn.dataset.id;
                    if (confirm('Are you sure you want to delete this post?')) {
                        const { error } = await db.from('blog_posts').delete().eq('id', id);
                        if(error) alert('Error deleting post: ' + error.message);
                        else {
                           await fetchBlogPosts();
                           await loadAdminBlogPosts(); 
                        }
                    }
                }
            });

            // --- Gallery CRUD ---
            const galleryForm = document.getElementById('gallery-form');
            const galleryIdInput = document.getElementById('gallery-id');
            const galleryUrlInput = document.getElementById('gallery-image-url');
            const galleryAltInput = document.getElementById('gallery-alt-text');
            const galleryList = document.getElementById('gallery-list');
            const galleryFormTitle = document.getElementById('gallery-form-title');
            const submitGalleryBtn = document.getElementById('submit-gallery-btn');
            const cancelGalleryEditBtn = document.getElementById('cancel-gallery-edit-btn');
            
            const loadAdminGallery = async () => {
                const { data, error } = await db.from('gallery_items').select('*').order('created_at');
                if (data) {
                    galleryList.innerHTML = data.map(item => `
                        <div class="flex items-center justify-between p-2 border rounded bg-white">
                            <img src="${item.image_url}" class="w-12 h-12 object-cover rounded mr-4">
                            <p class="truncate pr-4 flex-1">${item.alt_text}</p>
                            <div class="flex-shrink-0 flex gap-2">
                                <button class="edit-gallery-btn text-blue-500 hover:text-blue-700" data-id="${item.id}"><i class="w-4 h-4" data-lucide="edit"></i></button>
                                <button class="delete-gallery-btn text-red-500 hover:text-red-700" data-id="${item.id}"><i class="w-4 h-4" data-lucide="trash-2"></i></button>
                            </div>
                        </div>
                    `).join('');
                    lucide.createIcons();
                }
            };
            
            const resetGalleryForm = () => {
                galleryForm.reset();
                galleryIdInput.value = '';
                galleryFormTitle.textContent = 'Add New Gallery Item';
                submitGalleryBtn.textContent = 'Add Item';
                cancelGalleryEditBtn.classList.add('hidden');
            };

            galleryForm.addEventListener('submit', async(e) => {
                e.preventDefault();
                const itemData = {
                    image_url: galleryUrlInput.value,
                    alt_text: galleryAltInput.value,
                };
                const id = galleryIdInput.value;
                let error;

                if (id) { // Update
                    ({ error } = await db.from('gallery_items').update(itemData).eq('id', id));
                } else { // Create
                    ({ error } = await db.from('gallery_items').insert([itemData]));
                }
                
                if (error) {
                    alert('Error saving item: ' + error.message);
                } else {
                    resetGalleryForm();
                    await fetchGallery();
                    await loadAdminGallery();
                }
            });

            cancelGalleryEditBtn.addEventListener('click', resetGalleryForm);

            galleryList.addEventListener('click', async (e) => {
                const editBtn = e.target.closest('.edit-gallery-btn');
                const deleteBtn = e.target.closest('.delete-gallery-btn');

                if (editBtn) {
                    const id = editBtn.dataset.id;
                    const { data, error } = await db.from('gallery_items').select('*').eq('id', id).single();
                     if (data) {
                        galleryIdInput.value = data.id;
                        galleryUrlInput.value = data.image_url;
                        galleryAltInput.value = data.alt_text;
                        galleryFormTitle.textContent = 'Editing Item';
                        submitGalleryBtn.textContent = 'Update Item';
                        cancelGalleryEditBtn.classList.remove('hidden');
                        galleryForm.scrollIntoView({ behavior: 'smooth' });
                    }
                }

                if (deleteBtn) {
                     const id = deleteBtn.dataset.id;
                    if (confirm('Are you sure you want to delete this item?')) {
                        const { error } = await db.from('gallery_items').delete().eq('id', id);
                        if(error) alert('Error deleting item: ' + error.message);
                        else {
                           await fetchGallery();
                           await loadAdminGallery(); 
                        }
                    }
                }
            });


            const loadAdminData = () => {
                loadAdminBlogPosts();
                loadAdminGallery();
            };

        });
    </script>
</body>
</html>
